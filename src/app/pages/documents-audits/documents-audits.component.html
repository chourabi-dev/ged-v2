
<div class="card card-body">

    <div class="d-flex justify-content-end">
      
    </div>

    <div class="text-muted text-center" *ngIf="loading == true">
        <p>
            {{ 'Loading...'  | translate }}
        </p>
    </div>


    <form [formGroup]="form" (ngSubmit)="relaod()">
        <div class="row mb-3">
            <div class="col-sm-3">
                <input type="text" class="form-control" placeholder="Search by name" formControlName="name">
            </div> 
            <div class="col-sm-3">
                <select type="text" class="form-control" formControlName="categoryId">
                    <option value="">Search by category</option>


                    <optgroup label="{{c.name}}" *ngFor="let c of categories">
                      <option [value]="c.id">{{ c.name }}</option> 

                      <option [value]="s.id" *ngFor="let s of c.children">{{ s.name }}</option>
                    </optgroup>
 
                    
                </select>
            </div>
            
            <div class="col-sm-3">
                <select type="text" class="form-control" formControlName="createdBy">
                    <option value="">Search by user</option>
                    
                    <option [value]="u.id" *ngFor="let u of users">{{ u.firstName }} {{ u.lastName }}</option>
 
                    
                </select>
            </div>
            
            
            <div class="col-sm-3">
                <button class="btn btn-primary w-100" type="submit">Search</button>
            </div>
            
        </div> 
    
    </form>

     

    <table class="table" *ngIf="loading != true">
        <thead>
            <tr>
                <th>
                    {{ 'ACTIONDATE'  | translate }}
                </th>
                <th>
                    {{ 'Name'  | translate }}
                </th>
                <th>
                    {{ 'CATEGORY_NAME'  | translate }}
                </th>
                <th>
                    {{ 'OPERATION'  | translate }}
                </th>
                <th>
                    {{ 'BY_WHOM'  | translate }}
                </th>
                <th>
                    {{ 'TO_WHOM_USER'  | translate }}
                </th>
                <th>
                    {{ 'TO_WHOM_ROLE'  | translate }}
                </th>


                
                
                
            </tr>
        </thead>
        <tbody> 

            
 
 
 
            <tr *ngFor="let a of audits" >
               <td>
                {{ a.createdDate | date:'medium' }}
               </td>
               <td>
                {{ a.documentName }}
               </td>
               <td>
                {{ a.categoryName }}
               </td>
               <td>
                {{ a.operationName }}
               </td>
               <td>
                {{ a.createdBy }}
               </td>  
               <td>
                {{ a.permissionRole }}
               </td>
               <td>
                {{ a.permissionUser }}
               </td>
               
            </tr>
        </tbody>
    </table>
</div>